<!-- Template page to display user's profile -->
{% extends "cog/common/layout_center.html" %}

{% load cog_utils %}

{% block extrahead %}
	{% include 'cog/search/_datacart.html' %} 
	{% include 'cog/datacart/_datacart_js.html' %} 
{% endblock %}

{% block main %}
    
	<div style="text-align:center; font-weight:bold">Number Of Items in Data Cart: {{ datacart.items.all|length }}</div>
	
	{% if datacart.items.all|length > 0 %}
	  
	  <!-- skeleton form to empty the data cart via POST -->
	  <form name='emptyDataCartForm' action='{% url 'datacart_empty' site.id request.user.id %}' method='post'></form>
	  
	  <!-- data cart form -->
	  <form name='dataCartForm'>
		<table class="no-color">
		
			<!--  header -->
			<tr>
				<td align='left' width="10px"> Select </td>
				<td align='left' width="200px"> Item </td>
				<td align='left' width="20px"> 
					<a href="javascript:document.forms['emptyDataCartForm'].submit();">Remove All</a> 			
				</td>
			</tr>
			
			<!-- items -->
			{% for item in datacart.items.all %}
				<tr id="item_{{ item.identifier }}_hr">
					<td colspan="4"><hr style="margin-bottom: 0px; margin-top: 0px;"/></td>
				</tr>
				<tr id="item_{{ item.identifier }}">
					<td align='center'>
						<input type="checkbox" id="checkbox_{{ item.identifier }}"/>
					</td>
					<td align='left'>
						
						<!-- datacart item display -->
	                    {% with item.asRecord as record %}
							{% include 'cog/search/__record_display.html' %}	
						{% endwith %}
																	
					</td>
					<td align='left'> 	
						<a href="javascript:deleteFromCart('{{ item.identifier }}')">
							<img src="{{STATIC_URL}}cog/img/datacart-delete.png" height="20px" style="vertical-align:middle; padding-right:2px; padding-bottom:4px;">Remove</img>
						</a>			
					</td>			
				</tr>	
			{% endfor %}
	
		</table>
	  </form>
	{% endif %}

{% endblock %}