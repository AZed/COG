<!-- Template page to display user's profile -->
{% extends "cog/common/layout_center.html" %}

{% load cog_utils %}

{% block extrahead %}
	{% include 'cog/datacart/_datacart_js.html' %} 
{% endblock %}

{% block main %}
    
	<div style="text-align:center; font-weight:bold">Number Of Items in Data Cart: {{ datacart.items.all|length }}</div>
	
	{% if datacart.items.all|length > 0 %}
	  
	  <!-- skeleton form to empty the data cart via POST -->
	  <form name='emptyDataCartForm' action='{% url 'datacart_empty' site.id request.user.id %}' method='post'></form>
	  
	  <!-- data cart form -->
	  <form name='dataCartForm'>
	  
	  	<div style="text-align:center">
	  		Optional string to sub-select filenames: &nbsp;<input type="text" name="query-filter" id="query-filter"></input>
	  	</div>
	  	
		<!-- wget scripts place-holder -->
		<div class="padded-box" id="wget-scripts" style="display:none"></div>	
	  
		<table class="no-color">
		
			<!--  header -->
			<tr>
				<td align='left' width="10px"> 
					<input type="checkbox" id="datacart-checkbox" onclick="javascript:toggleAllDataCartItems()"></input>
				</td>
				<td align='left' width="200px">
					<b>Available Services:</b>
					&nbsp; [ <a href="javascript:wgetDatasets()">WGET All Selected Datasets</a> ]
				
				</td>
				<td align='left' width="50px"> 
					<a href="javascript:document.forms['emptyDataCartForm'].submit();">
					<img src="{{STATIC_URL}}cog/img/datacart-delete.png" height="20px" style="vertical-align:middle; padding-right:2px; padding-bottom:4px;">
						Remove All
					</a> 			
				</td>
			</tr>
			
			<!-- items -->
			{% for item in datacart.items.all %}
				<tr id="item_{{ item.identifier }}_hr">
					<td colspan="4"><hr style="margin-bottom: 0px; margin-top: 0px;"/></td>
				</tr>
				<tr id="item_{{ item.identifier }}">
					<td align='center'>
						<input type="checkbox" id="dataitem-checkbox_{{ item.identifier }}" name="{{ item.identifier }}"/>
					</td>
					<td align='left'>
						
						<!-- datacart item display -->
	                    {% with item.asRecord as record %}
							{% include 'cog/search/_record_display.html' %}	
						{% endwith %}
																	
					</td>
					<td align='left'> 	
						<a href="javascript:deleteFromCart('{{ item.identifier }}')">
							<img src="{{STATIC_URL}}cog/img/datacart-delete.png" height="20px" style="vertical-align:middle; padding-right:2px; padding-bottom:4px;">Remove</img>
						</a>			
					</td>			
				</tr>	
			{% endfor %}
	
		</table>
	  </form>
	{% endif %}

{% endblock %}