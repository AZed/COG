{% extends "cog/common/layout_center.html" %}

{% block extrahead %}
	<style type="text/css">
		input.openid {
		    background: url({% url 'openid-logo' %}) no-repeat;
		    background-position: 0 50%;
		    padding-left: 16px;
		    width:380px;
		}

		.th {
			font-weight: bold;
			vertical-align: middle;
			text-align: right;
		}
	</style>
{% endblock %}

{% block main %}

  {% load cog_utils %}

  <div class="prepend-4 span-14">

<!-- 1) username+password login -->


	<h2>CoG Login</h2>

	<!-- display extra message if available -->
	{% if request.GET.message1 %}
	   <div class="message-box"> {{ request.GET.message1|showMessage }}</div>
	   <p/>
	{% endif %}

	<i>Use your CoG username and password if you have an existing CoG account.
	Once you are logged in, you can optionally edit your CoG profile to insert one (or more) ESGF OpenIDs.
	To download data from ESGF, you will have to login again with a valid ESGF OpenID.
	</i>
	<p/>

	<!-- authentication form -->
	<div style="font-style: italic; text-align:center;">
		Please note that username and password are case-sensitive.
	</div>

	<form method="post" action="{% url 'login' %}" method="post">
	   {% csrf_token %}
		<div class="mybox">
			<table>
				<caption>User Login</caption>
				<tr>
				    <td class="th">Username</td>
				    <td>
				    	<input type="text" id="username" name="username" value="{{ request.REQUEST.username }}" size="30" />
				    </td>
				</tr>
				<tr>
					<td class="th">Password</td>
				    <td>
				    	<input type="password" id="password" name="password" size="30"  />
				    	&nbsp;<input type="submit" value="Login" />
				    </td>
				</tr>
			</table>
         </div>

         <!-- next page field -->
         {% if next %}
		 	<input type="hidden" name="next" value="{{ next }}" />
		 {% endif %}

         <!-- reminder links -->
		 <div style="position: relative;">
			<span style="position: absolute; right: 0px;">
			  <a href="{% url 'username_reminder' %}">Forgot Username?</a>
			  &nbsp;
			  <a href="{% url 'password_reset' %}">Forgot Password?</a>
			</span>
            <br/>&nbsp;
		 </div>

	</form>


<!-- 2) OpenID login -->

		<h2>ESGF Login</h2>

		<!-- display extra message if available -->
		{% if request.GET.message2 %}
		   <div class="message-box"> {{ request.GET.message2|showMessage }}</div>
		   <p/>
		{% endif %}

		<i>You can use any valid ESGF OpenID to log onto CoG and ESGF at the same time.
		This method is recommended if you plan on downloading data from ESGF, since you will not be asked you enter your password again.
		If this is the first time you use your ESGF OpenID on CoG, you will be asked to provide some additional information
		to create a new CoG account.
		</i>
		<p/>

		<form name="fopenid" action="{% url 'openid-login' %}" method="post">
    		{% csrf_token %}

    		<div class="mybox">
	    		<table>
	    			<caption>OpenID Login</caption>
	    			<tr>
	    				<td class="th">OpenID</td>
	    				<td>
	    					<input type="text" id="openid_identifier" name="openid_identifier" value="{{ request.REQUEST.openid }}" size="70"/>
	    					&nbsp;<input name="bsignin" type="submit" value="Login">
	    				</td>
	    			</tr>
	    		</table>
    		</div>

    		<!-- next page field -->
			{% if next %}
				<input type="hidden" name="next" value="{{ next }}" />
			{% endif %}

			<!-- reminder links -->
			<div style="position: relative;">
				<span style="position: absolute; right: 0px;">
					<a href="{% url 'username_reminder' %}">Forgot OpenID?</a>
				</span>
	            <br/>&nbsp;
			</div>

		</form>

	</div>
{% endblock %}