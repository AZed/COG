{% extends "cog/common/layout_center.html" %}
<!--LOCATION:/cog/templates/cog/openid/login.html-->

{% block extrahead %}
	<style type="text/css">
		input.openid {
		    background: url({% url 'openid-logo' %}) no-repeat;
		    background-position: 0 50%;
		    padding-left: 16px;
		    width:380px;
		}

		.th {
			font-weight:bold;
			vertical-align:middle;
			text-align:right;
		}
	</style>
{% endblock %}

{% block main %}

{% load cog_utils %}

<div class="prepend-4 span-14">

	<!-- display extra message if available -->
	{% if request.GET.message %}
	   <div class="message-box"> 
	   	{{ request.GET.message|showMessage|safe }}
	   	
	   	{% if request.COOKIES.openid %}
	   		<br/>Your assigned OpenID is: <b> {{ request.COOKIES.openid }} </b>
	   	{% endif %}
	   		
	   </div>
	   <p/>
	{% endif %}

	<h2>OpenID Login</h2>

	<p>
	  <i>
		<b>You must use a valid ESGF OpenID to log onto CoG and ESGF at the same time.</b>
		
		<p/>
		1) If you already have a CoG account, 
		please visit this page to reset your password and obtain an ESGF OpenID.
		You only need to do this once.
		
		<p/>
		2) If you already have a valid ESGF OpenID, you can use it to log onto CoG.
		If your are using this OpenID for the first time, you will be asked to provide some additional information
		to create a new CoG account.
		
		<p/>
		3) If you are new to CoG and ESGF, please visit this page to create a combined COG + ESGF account.
		
		<p/>For any problem, click on
		<a href="{% url 'user_reminder' %}">Forgot OpenID?</a> or visit <a href="/projects/cog/contactus/">Site Support</a>.
		
	  </i>
	</p>
	
	<p/>
	<div style="font-style: italic; text-align:center;">
		Please note that ESGF OpenIDs are case-sensitive.
 	</div>

	<form name="fopenid" action="{% url 'openid-login' %}" method="post">
		{% csrf_token %}

		<div class="mybox">
    	<table>
    	  <caption>ESGF Login</caption>
    	  <tr>
    	    <td style="width:10%;text-align:right; vertical-align:middle;"><b>OpenID</b></td>
	    		<td style="width:80%; vertical-align:middle;">
	    			<input type="text" id="openid_identifier" name="openid_identifier" value="{{ request.COOKIES.openid }}" size="70"/></td>
    	    <td style="width:10%;"><input name="bsignin" type="submit" value="Login"></td>
    	</td>
    	</tr>
    	</table>
		</div>

		<!-- next page field -->
		{% if next %}
			<input type="hidden" name="next" value="{{ next }}" />
		{% endif %}

		<!-- reminder links -->
		<div style="position: relative;">
			<span style="position: absolute; right: 0px;">
				<a href="{% url 'user_reminder' %}">Forgot OpenID?</a>
			</span>
            <br/>&nbsp;
		</div>

	</form>

</div>
{% endblock %}