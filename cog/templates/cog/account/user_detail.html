<!-- Template page to display user's profile -->
{% extends "cog/common/layout_center.html" %}

{% load cog_utils %}

{% block main %}

  {% if user_profile.user|isRemote %}
  
    <div class="prepend-6 span-12">

        <h2>User Profile</h2>
  
  		<div class="message-box">
    		User Home Site: {{ user_profile.site.name }}
    	</div>
    
    	<br/>
    	
    	<div style="text-align: center">
    		<a href="{{ user_profile.getAbsoluteUrl }}">View User Profile at {{ user_profile.site.name }}</a>    	
    	</div>
    	
  {% else %}
  
    <div class="prepend-1 span-24">

        <h2>User Profile</h2>

          <!-- extra style here is to ensure spacing between the boxes matches the spacing (e.g. 10px) on the main pages. Note .mybox has a 5px margin. Just adding 5px; -->
            <div class="span-10"style="margin-bottom:5px;">
		 {% include 'cog/account/_user_profile.html' %}
	    </div>
		   
  	   <div class="span-8" style="margin-bottom:5px;">
             {% include 'cog/account/_user_projects.html' %}
   	   </div>

	   <div class="span-5 last">
	     <img src="{{ user_profile.user|getImage }}" {% if user_profile.image %} class="myimage" {% endif %}/>
    	   </div>


	 <div class="span-17 last" style="margin-bottom:5px;" >
              {% include 'cog/account/_user_openids.html' %}
	</div>

	<div class="span-17 last" style="margin-bottom:5px;" >
	      {% include 'cog/account/_user_research.html' %}
        </div>
		  
        <div class="span-17 last" style="margin-bottom:5px;" >
		 {% if request.user.id = user_profile.user.id or request.user.is_staff %}
		            <div style="text-align:center">
		                <a href="{% url 'user_update' user_profile.user.id %}">Update my profile</a>
		                {% if user_profile.isCogUser %}
			                &nbsp; &nbsp;
			                <a href="{% url 'password_update' user_profile.user.id %}">Change my password</a>
		                {% endif %}
		            </div>
		        {% endif %}
	   	   </div>

	    </div>

	   

     </div>
  
  {% endif %}

{% endblock %}