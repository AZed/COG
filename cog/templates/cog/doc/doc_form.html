{% extends "cog/common/layout_sidebar_center.html" %}

{% block main %}

	<div class="mybox">
		<form action="" method="post" enctype="multipart/form-data">
		
		    <!-- extra hidden field to enable complex workflows (document creation + attachment) -->
		    <input type="hidden" name="redirect" value="{{ request.GET.redirect }}"/>
		    
		    {% csrf_token %}
		    
		    <!-- document form fields -->
            <table>
                <tr>
                    <td class="right"><b>Project</b></td>
                    <td colspan="3">{{ form.project }} </td>                
                </tr>
                <tr>
                    <td class="right"><b>Publisher</b></td>
                    <td>{{ request.user }} </td>                
                </tr>
                <tr>
                    <td class="right"><b>File</b></td>
                    <td class="left">{{form.instance.file.name}} &nbsp; {{ form.file }} (Maximum size: 50 MB. The file name can contain only letters, numbers and _-.) 
                    <span style="color:red; font-weight:bold">&nbsp;{{ form.file.errors }}</span> </td>
                </tr>                         
                <tr>
                    <td class="right">Title</td>
                    <td class="long" nowrap="nowrap">{{ form.title }} {{ form.title.errors }}</td>
                </tr>
                <tr>
                    <td class="right">Description</td>
                    <td>{{ form.description }} {{ form.description.errors }} </td>
                </tr>
                <tr>
          			<td nowrap="nowrap" class="right">Private ?</td>
          			<td>{{ form.is_private }} &nbsp; (<i>if checked, only project members will be able to download this file</i>)</td>                   
    			</tr>    
                <tr>
                    <td>&nbsp;</td>
                    <td><i>Required fields are in</i> <b>bold</b>.</td>
                </tr>
            </table>
            <!-- must resubmit the doc path as hidden field when updating -->
            {{ form.path.as_hidden }}

            <span class="right">	   
		        {% if form.instance.id %}
		            <input type="reset" value="Cancel" onclick="self.location='{% url doc_detail form.instance.id %}'"/>
		        {% else %}
		            <input type="reset" value="Cancel" onclick="self.location='{% url project_home project.short_name.lower %}'"/>
		        {% endif %}
		        &nbsp; <input type="submit" value="Submit" />
            </span> 		
		    
		</form>
	</div>

{% endblock %}