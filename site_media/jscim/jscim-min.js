/*!
 * jscim - javascript Library v0.8.0
 * https://github.com/ES-DOC/jscim
 *
 * Copyright 2012, ES-DOC (http://es-doc.org)
 *
 * Licensed under the following licenses:.
 *     CeCILL       http://www.cecill.info/licences/Licence_CeCILL_V2-en.html
 *     GPL v3       http://www.gnu.org/licenses/gpl.html
 *
 * Date: Fri 27 Jul 2012 13:53:33 UTC
 */

"use strict";window.$=window.$jq=jQuery.noConflict();(function(){var root=this,events;events=_.extend({},Backbone.Events);events.on("global:error",function(error){if(_.isUndefined(error.errors)){error.errors="An unknown error has occurred.  If this persists please contact jscim @ github"}if(_.isArray(error.errors)==false){error.errors=[error.errors]}var ex=Error();ex.name="JS-CIM v{0} - {1} - {2} Error";ex.name=ex.name.replace("{0}",root.CIM.utils.constants.app.VERSION);ex.name=ex.name.replace("{1}",error.type);ex.name=ex.name.replace("{2}",error.subType);ex.message=_.reduce(error.errors,function(memo,msg){return memo+msg+"\n"},"");events.trigger("cim:exception",ex)});if(_.isUndefined(root.CIM)){root.CIM=root.cim={events:events,utils:{views:{}}}}}).call(this);(function(){var CIM=this.CIM;CIM.utils.constants={app:{NAME:"ES-DOC CIM Viewer",VERSION:"0.8.0"},DEFAULT_SCHEMA:"1.5",DEFAULT_LANGUAGE:"en",api:{BASE_URL:"http://test.api.esdoc.webfactional.com",query:{DOCSET_BY_ID:"/1/query/documentSetByID",DOCSET_BY_EXTERNAL_ID:"/1/query/documentSetByExternalID",DOCSET_BY_DRS:"/1/query/documentSetByDRS",DOC_BY_ID:"/1/query/documentByID",DOC_BY_NAME:"/1/query/documentByName"}},http:{GET:"GET",JSONP:"jsonp",JSONP_CALLBACK_FN:"onJSONPLoad"}}}).call(this);(function(){var CIM=this.CIM;CIM.utils.denull=function(obj,newval){if(_.isArray(obj)){_(obj).each(function(item){CIM.utils.denull(item,newval)})}else{if($jq.isPlainObject(obj)){_.each(_.keys(obj),function(key){if(_.isNull(obj[key])){obj[key]=newval}else{if($jq.isArray(obj[key])){_.each(obj[key],function(item){CIM.utils.denull(item,newval)})}else{if($jq.isPlainObject(obj[key])){CIM.utils.denull(obj[key],newval)}}}})}}}}).call(this);(function(){var CIM=this.CIM;CIM.utils.schemas={supported:{"1.5":{activity:["numericalExperiment","simulationRun"],data:["dataObject"],grids:["gridSpec"],quality:[],shared:["platform"],software:["modelComponent"]}},supported1:[{version:"1.5",types:[{name:"cIM_Quality",shortName:"quality",displayName:"QC Record",pkg:"quality"},{name:"dataObject",shortName:"data",displayName:"Data",pkg:"data"},{name:"ensemble",shortName:"ensemble",displayName:"Ensemble",pkg:"activity"},{name:"gridSpec",shortName:"grid",displayName:"Grid",pkg:"grids"},{name:"modelComponent",shortName:"model",displayName:"Model",pkg:"software"},{name:"numericalExperiment",shortName:"experiment",displayName:"Experiment",pkg:"activity"},{name:"platform",shortName:"platform",displayName:"Platform",pkg:"shared"},{name:"simulationRun",shortName:"simulation",displayName:"Simulation",pkg:"activity"}]}],isSupportedSchema:function(schema){return _.isUndefined(_.find(this.supported1,function(s){return s.version===schema}))===false},getSchema:function(schema){return _.find(this.supported1,function(s){return s.version===schema})},isSupportedType:function(schema,type){if(this.isSupportedSchema(schema)===false){return false}schema=this.getSchema(schema);if(_.isUndefined(_.find(schema.types,function(t){return t.name===type||t.shortName===type}))){return false}return true},getType:function(schema,type){var result;if(this.isSupportedType(schema,type)){result=_.find(this.getSchema(schema).types,function(t){return t.name===type||t.shortName===type})}return result},getSchemaInfo:function(version){return _.find(this.supported1,function(schema){return schema.version===version})},getPackageInfo:function(version,pkgName){var schema;schema=this.getSchemaInfo(version);if(_.isUndefined(schema)===false){return _.find(schema.packages,function(pkg){return pkg.name===pkgName})}return undefined},getTypeInfo:function(version,pkgName,typeName){var pkg;pkg=this.getPackageInfo(version,pkgName);if(_.isUndefined(pkg)===false){return _.find(pkg.types,function(type){return type.name===typeName})}return undefined},getDocumentDisplayName:function(document){var type,cimTypeInfo;if(_.isUndefined(document)===false){cimTypeInfo=document.cimInfo.typeInfo;type=this.getTypeInfo(cimTypeInfo.schema,cimTypeInfo.pkg,cimTypeInfo.type);if(_.isUndefined(type)===false){return type.displayName}}return undefined}}}).call(this);(function(){var CIM=this.CIM,that={},setError,are;setError=function(errors,msg){if(_.isUndefined(errors)){errors=[]}if(_.isArray(errors)){errors.push(msg)}else{errors=[errors];errors.push(msg)}};are=function(fields,errors,validator){if(fields){_.each(fields,function(field){validator(field[0],field[1],errors)})}};that.isRequired=function(value,name,errors){var isValid;var msg;isValid=!_.isUndefined(value);if(!isValid){msg="Parameter {{0}} is required";msg=msg.replace("{0}",name);setError(errors,msg)}return isValid};that.areRequired=function(obj,fields,errors){var msg="Parameter {{0}} is required";_.each(fields,function(field){if(_.has(obj,field)===false){setError(errors,msg.replace("{0}",field))}})};that.areStrings=function(obj,fields,errors){var msg="Parameter {{0}} must be a string";_.each(fields,function(field){if(_.has(obj,field)&&_.isString(obj[field])===false){setError(errors,msg.replace("{0}",field))}})};that.isString=function(value,name,errors){var isValid;var msg;isValid=_.isString(value)&&$jq.trim(value).length>0;if(!isValid){msg="Parameter {{0}} must be a string";msg=msg.replace("{0}",name);setError(errors,msg)}return isValid};that.areStrings=function(fields,errors){are(fields,errors,that.isString)};that.isPlainObject=function(value,name,errors){var isValid;var msg;isValid=$jq.isPlainObject(value);if(!isValid){msg="Parameter {{0}} must be a hash of key/value pairs";msg=msg.replace("{0}",name);setError(errors,msg)}return isValid};that.arePlainObjects=function(fields,errors){are(fields,errors,that.isPlainObject)};that.isCIMType=function(schema,type,errors){var isValid,msg;isValid=CIM.utils.schemas.isSupportedType(schema,type);if(!isValid){msg="Invalid cim document type :: {0} (schema = v{1}).";msg=msg.replace("{0}",type);msg=msg.replace("{1}",schema);setError(errors,msg)}return isValid};CIM.utils.validation=that}).call(this);(function(){var CIM=this.CIM,View;View=Backbone.View.extend({render:function(){var me=this;this.$el.dialog({bgiframe:false,autoOpen:false,height:"auto",width:"1000",position:["center",80],modal:true,resizable:false,close:function(){if(_.isUndefined(me.options.onClose)===false&&_.isFunction(me.options.onClose)){me.options.onClose()}me.remove();me.$el.dialog("destroy")}})},append:function(el){this.$el.append(el)},open:function(){this.$el.dialog("open")},setTitle:function(caption){var title="";title=CIM.utils.constants.app.NAME;title+=" v";title+=CIM.utils.constants.app.VERSION;if(_.isUndefined(caption)===false){title+=" | ";title+=caption}this.$el.dialog("option","title",title)}});CIM.utils.views.DialogView=View}).call(this);(function(){var CIM=this.CIM,MESSAGE_TYPE_INFORMATION=1,MESSAGE_TYPE_CONFIRMATION=2,MESSAGE_TYPE_PROGRESS=3,MESSAGE_TYPE_HELP=4,MESSAGE_TYPE_WARNING=90,MESSAGE_TYPE_ERROR=99,STANDARD_MESSAGE_UNKNOWN="Unknown message",STANDARD_MESSAGE_ERROR="A processing error has occurred ... please contact the system administrator.",getTypeName,getClassName,getIconClassName,getTextClassName,View;getTypeName=function(type){if(type===MESSAGE_TYPE_INFORMATION){return"information"}else{if(type===MESSAGE_TYPE_CONFIRMATION){return"confirmation"}else{if(type===MESSAGE_TYPE_HELP){return"help"}else{if(type===MESSAGE_TYPE_WARNING){return"warning"}else{if(type===MESSAGE_TYPE_ERROR){return"error"}else{return"information"}}}}}};getClassName=function(type){var typeName=getTypeName(type);return"cim-message cim-message-"+typeName};getIconClassName=function(type){var typeName=getTypeName(type);return"cim-message-icon cim-message-icon-"+typeName};getTextClassName=function(type){var typeName=getTypeName(type);return"cim-message-text cim-message-text-"+typeName};View=Backbone.View.extend({$make:function(tag,atts,text){return $jq(this.make(tag,atts,text))},setup:function(type){var text,icon;this.className=getClassName(type);icon=this.$make("div",{"class":getIconClassName(type)});this.$el.append(icon);text=this.$make("div",{"class":getTextClassName(type)});this.$el.append(text)},setText:function(type,text){if(_.isUndefined(text)){if(type===MESSAGE_TYPE_ERROR){text=STANDARD_MESSAGE_ERROR}else{text=STANDARD_MESSAGE_UNKNOWN}}this.$(".cim-message-text").text(text)},setCaption:function(type,caption){var title="";title=CIM.utils.constants.app.NAME;title+=" - ";title+="v";title+=CIM.utils.constants.app.VERSION;if(_.isUndefined(caption)===false){title+=" - ";title+=caption}this.$el.attr("title",title)},destroy:function(){this.$el.dialog("close");this.$el.dialog("destroy");this.remove()},createConfig:function(type,continuation){var view=this,config;config={width:380,position:["center",150],modal:true};if(type===MESSAGE_TYPE_INFORMATION||type===MESSAGE_TYPE_HELP||type===MESSAGE_TYPE_WARNING||type===MESSAGE_TYPE_ERROR){_.extend(config,{buttons:{OK:function(){view.destroy();if(_.isFunction(continuation)){continuation()}}}})}if(type===MESSAGE_TYPE_CONFIRMATION){_.extend(config,{Yes:function(){view.destroy();if(_.isFunction(continuation)){continuation()}},No:function(){view.destroy()}})}return config},render:function(type,text,caption,continuation){this.setup(type);this.setText(type,text);this.setCaption(type,caption);this.$el.dialog(this.createConfig(type,continuation))}});CIM.events.on("message:confirmation",function(text,caption,continuation){new View().render(MESSAGE_TYPE_CONFIRMATION,text,caption,continuation)});CIM.events.on("message:error",function(text,caption,continuation){new View().render(MESSAGE_TYPE_ERROR,text,caption,continuation)});CIM.events.on("message:help",function(text,caption,continuation){new View().render(MESSAGE_TYPE_HELP,text,caption,continuation)});CIM.events.on("message:information",function(text,caption,continuation){new View().render(MESSAGE_TYPE_INFORMATION,text,caption,continuation)});CIM.events.on("message:warning",function(text,caption,continuation){new View().render(MESSAGE_TYPE_WARNING,text,caption,continuation)})}).call(this);(function(){var CIM=this.CIM,FieldSetView,FieldGroupView,FieldView;FieldSetView=Backbone.View.extend({className:"cim-row-group ui-corner-all",render:function(){var fieldSet=this.options.fieldSet,mode=this.options.renderMode;if(_.isArray(fieldSet.model)===false){fieldSet.model=[fieldSet.model]}if(mode==="column"){this._renderInlineView(fieldSet)}else{this._renderInlineView(fieldSet)}return this},_renderInlineView:function(fieldSet){var fieldGroup,fieldGroupView,me=this;_.each(fieldSet.model,function(model){fieldGroup={model:model,fields:fieldSet.fields};fieldGroupView=new FieldGroupView({fieldGroup:fieldGroup});fieldGroupView.render();me.$el.append(fieldGroupView.$el)})},_renderColumnView:function(fieldSet){var fieldGroup,fieldGroupView,me=this;_.each(fieldSet.model,function(model){fieldGroup={model:model,fields:fieldSet.fields};fieldGroupView=new FieldGroupView({fieldGroup:fieldGroup});fieldGroupView.render();me.$el.append(fieldGroupView.$el)})}});FieldGroupView=Backbone.View.extend({className:"cim-row-group ui-corner-all",render:function(){var fieldGroup=this.options.fieldGroup;var fieldView;var me=this;_.each(fieldGroup.fields,function(field){field.model=fieldGroup.model;fieldView=new FieldView({field:field});fieldView.render();me.$el.append(fieldView.$el)});return this}});FieldView=Backbone.View.extend({className:"cim-row",fieldHTML:"<div class='cim-cell-label'>\n                <span title='{title}'>{title}</span>\n            </div>\n            <div class='cim-cell-input'>\n                <span><%- {expression} %></span>\n            </div>",render:function(){var field=this.options.field;var html=this.fieldHTML;html=html.replace(/{title}/g,field.title);html=html.replace(/{expression}/g,field.expression);html=_.template(html)(field.model);this.$el.append(html);return this}});CIM.utils.views.FieldSetView=FieldSetView;CIM.utils.views.FieldGroupView=FieldGroupView;CIM.utils.views.FieldView=FieldView}).call(this);(function(){var CIM=this.CIM,NamedValueGroupSetView,NamedValueGroupView,NamedValueSetView,NamedValueView;NamedValueGroupSetView=Backbone.View.extend({className:"cim-nv-groupset",render:function(){var model=this.options.model,view,me=this;if(_.isArray(model)===false){model=[model]}_.each(model,function(group){view=new NamedValueGroupView({model:group});view.render();me.$el.append(view.$el)})}});NamedValueGroupView=Backbone.View.extend({className:"cim-nv-group",render:function(){var group=this.options.model,view,me=this;me.$el.append("<div class='title ui-state-highlight ui-corner-all'>{0}</div>".replace("{0}",group.title));view=new NamedValueSetView({model:group.namedValueSet});view.render();me.$el.append(view.$el)}});NamedValueSetView=Backbone.View.extend({className:"cim-row-group ui-corner-all",render:function(){var nvSet=this.options.model,nvView,me=this;if(_.isArray(nvSet)===false){nvSet=[nvSet]}nvSet=_.sortBy(nvSet,"name");_.each(nvSet,function(nv){nvView=new NamedValueView({model:nv});nvView.render();me.$el.append(nvView.$el)})}});NamedValueView=Backbone.View.extend({className:"cim-row",nvHTML:"<div class='cim-nv-name'>\n                <span title='{name}'>{name}</span>\n            </div>\n            <div class='cim-nv-value'>\n                <span>{value}</span>\n            </div>",render:function(){var nv=this.options.model;var html=this.nvHTML;html=html.replace(/{name}/g,nv.name);html=html.replace(/{value}/g,nv.value);this.$el.append(html);return this}});CIM.utils.views.NamedValueGroupSetView=NamedValueGroupSetView;CIM.utils.views.NamedValueGroupView=NamedValueGroupView;CIM.utils.views.NamedValueSetView=NamedValueSetView;CIM.utils.views.NamedValueView=NamedValueView}).call(this);(function(){var CIM=this.CIM,View;View=Backbone.View.extend({className:"cim-tabbed-view",render:function(){var $ul,$li,view=this;$ul=$jq(view.make("ul"));_.each(this.options.tabset,function(tab){$ul.append($jq(this.make("li",{})).append($jq(this.make("a",{href:"#"+tab.id,"class":tab.css===undefined?"cim-tab-button":tab.css},tab.title))))},this);this.options.$contentWrapper.append(this.$el);this.$el.append($ul);this.$el.append(this.options.$content);this.$el.tabs({fx:{opacity:"toggle"}})}});CIM.utils.views.TabsetView=View}).call(this);(function(){var CIM=this.cim,doQuery,parseDocumentSet;CIM.api={};doQuery=function(params,query){var parseParams,validateParams,invokeAPI,onAPISuccess;parseParams=function(){params.project=$jq.trim(params.project);params.project=params.project.toUpperCase();_.defaults(params,{schema:CIM.utils.constants.DEFAULT_SCHEMA,language:CIM.utils.constants.DEFAULT_LANGUAGE})};validateParams=function(){return true};onAPISuccess=function(documentSet){documentSet=parseDocumentSet(documentSet);CIM.events.trigger("api:documentSetLoaded",documentSet)};invokeAPI=function(){try{$jq.ajax({type:CIM.utils.constants.http.GET,url:query.getURL(),data:query.getURLParams(),dataType:CIM.utils.constants.http.JSONP,jsonp:CIM.utils.constants.http.JSONP_CALLBACK_FN,success:onAPISuccess})}catch(exception){CIM.events.trigger("api:webServiceError","query",query.name,exception);return}};try{if(validateParams()===true&&query.validateParams()===true){parseParams();if(_.isFunction(query.parseParams)){query.parseParams()}invokeAPI()}}catch(exception){CIM.events.trigger("api:error","query",query.name,exception)}};parseDocumentSet=function(documentSet){if(_.isUndefined(documentSet)){documentSet=[]}else{if(_.isArray(documentSet)==false){documentSet=[documentSet]}}documentSet=_.map(documentSet,function(doc){if(_.isObject(doc)){return doc}else{return JSON.parse(doc)}});documentSet=_.filter(documentSet,function(doc){return(_.has(doc,"cimInfo")&&_.has(doc.cimInfo,"typeInfo")&&_.has(doc.cimInfo.typeInfo,"schema")&&_.has(doc.cimInfo.typeInfo,"package")&&_.has(doc.cimInfo.typeInfo,"type"))});_.each(documentSet,function(doc){doc.cimInfo.typeInfo.pkg=doc.cimInfo.typeInfo["package"];doc.cimInfo.key=doc.cimInfo.project;doc.cimInfo.key+="_";doc.cimInfo.key+=doc.cimInfo.typeInfo.schema;doc.cimInfo.key+="_";doc.cimInfo.key+=doc.cimInfo.id;doc.cimInfo.key+="_";doc.cimInfo.key+=doc.cimInfo.version;doc.cimInfo.typeKey=doc.cimInfo.typeInfo.schema;doc.cimInfo.typeKey+="-";doc.cimInfo.typeKey+=doc.cimInfo.typeInfo.pkg;doc.cimInfo.typeKey+="-";doc.cimInfo.typeKey+=doc.cimInfo.typeInfo.type;doc.cimDisplayTitle=doc.cimInfo.project.toUpperCase();doc.cimDisplayTitle+=" ";doc.cimDisplayTitle+=doc.cimInfo.typeInfo.typeDisplayName;doc.cimDisplayTitle+=" - ";doc.cimDisplayTitle+=doc.shortName;doc.cimDisplayTitle+=" (v";doc.cimDisplayTitle+=doc.cimInfo.version;doc.cimDisplayTitle+=")"});return documentSet};CIM.api.getByExternalID=function(params){var query={};query.name="getByExternalID";query.validateParams=function(){var errors=[],fields=["externalID","externalType","project","schema","language"];if(CIM.utils.validation.isPlainObject(params,"params",errors)==true){CIM.utils.validation.areRequired(params,fields,errors);CIM.utils.validation.areStrings(params,fields,errors)}if(errors.length>0){CIM.events.trigger("api:error",errors)}return errors.length===0};query.getURL=function(){var url;url=CIM.utils.constants.api.BASE_URL;url+=CIM.utils.constants.api.query.DOCSET_BY_EXTERNAL_ID;url+="/"+params.project;url+="/"+params.externalType;url+="/"+params.externalID;return url};query.getURLParams=function(){return{encoding:"json",language:params.language,schema:params.schema}};doQuery(params,query)};CIM.api.getByDRS=function(params){var query={};query.name="getByDRS";query.validateParams=function(){var errors=[],fields=["drsPath","schema","language"];if(CIM.utils.validation.isPlainObject(params,"params",errors)==true){CIM.utils.validation.areRequired(params,fields,errors);CIM.utils.validation.areStrings(params,fields,errors)}if(errors.length>0){CIM.events.trigger("api:error",errors)}return errors.length===0};query.parseParams=function(){if(_.has(params,"drsKeys")===false){params.drsKeys=_.without(params.drsPath.split("/"),"")}params.drsPath=_.reduce(params.drsKeys,function(drsPath,drsKey){return drsPath+"/"+$jq.trim(drsKey).toUpperCase()},"")};query.getURL=function(){var url;url=CIM.utils.constants.api.BASE_URL;url+=CIM.utils.constants.api.query.DOCSET_BY_DRS;url+=params.drsPath;return url};query.getURLParams=function(){return{encoding:"json",language:params.language,schema:params.schema}};doQuery(params,query)};CIM.api.getByName=function(params){var query={};query.name="getByName";query.validateParams=function(){var errors=[],fields=["project","type","name","schema","language"];if(CIM.utils.validation.isPlainObject(params,"params",errors)==true){CIM.utils.validation.areRequired(params,fields,errors);CIM.utils.validation.areStrings(params,fields,errors);if(errors.length===0){CIM.utils.validation.isCIMType(params.schema,params.type,errors)}}if(errors.length>0){CIM.events.trigger("api:error",errors)}return errors.length===0};query.parseParams=function(){params.type=CIM.utils.schemas.getType(params.schema,params.type).name;params.type=params.type.toUpperCase();params.name=$jq.trim(params.name);params.name=params.name.toUpperCase()};query.getURL=function(){var url;url=CIM.utils.constants.api.BASE_URL;url+=CIM.utils.constants.api.query.DOC_BY_NAME;url+="/"+params.project;url+="/"+params.type;url+="/"+params.name;return url};query.getURLParams=function(){return{encoding:"json",language:params.language,schema:params.schema}};doQuery(params,query)};CIM.api.getByID=function(params){var query={};query.name="getByID";query.validateParams=function(){var errors=[];fields=["id","version","target","project","schema","language"];if(CIM.utils.validation.isPlainObject(params,"params",errors)==true){CIM.utils.validation.areRequired(params,fields,errors);CIM.utils.validation.areStrings(params,fields,errors)}if(errors.length>0){CIM.events.trigger("api:error",errors)}return errors.length===0};query.getURL=function(){var url;url=CIM.utils.constants.api.BASE_URL;if(params.target.toUpperCase()==="DOCUMENT"){url+=CIM.utils.constants.api.query.DOC_BY_ID}else{url+=CIM.utils.constants.api.query.DOCSET_BY_ID}url+="/"+params.project;url+="/"+params.id;url+="/"+params.version;return url};query.getURLParams=function(){return{encoding:"json",language:params.language,schema:params.schema}};doQuery(params,query)}}).call(this);(function(){var CIM=this.CIM;CIM.events.on("api:error",function(err){var error;error={type:"API",subType:"General",errors:[err]};CIM.events.trigger("global:error",error)});CIM.events.on("api:webServiceError",function(service,operation,exception){var error,err;err="An error occurred when invoking a CIM web service:\n";err+="\tService\t: "+service+"\n";err+="\tOperation\t: "+operation+"\n";err+="\tError\t\t: "+exception.message+"\n";error={type:"API",subType:"Web Service",errors:[err]};CIM.events.trigger("global:error",error)})}).call(this);(function(){var CIM=this.cim;CIM.viewer={views:{}};CIM.viewer.renderFromDRS=function(params){var validateParams,parseParams;validateParams=function(){var errors=[],fields=["drsPath","project","schema","language"];if(CIM.utils.validation.isPlainObject(params,"params",errors)==true){CIM.utils.validation.areRequired(params,fields,errors);CIM.utils.validation.areStrings(params,fields,errors)}if(errors.length>0){CIM.events.trigger("viewer:error",errors)}return errors.length===0};parseParams=function(){_.defaults(params,{schema:CIM.utils.constants.DEFAULT_SCHEMA,language:CIM.utils.constants.DEFAULT_LANGUAGE})};parseParams();if(validateParams()===true){CIM.api.getByDRS(params)}};CIM.viewer.renderFromExternalID=function(params){var validateParams,parseParams;validateParams=function(){var errors=[],fields=["externalID","externalType","project","schema","language"];if(CIM.utils.validation.isPlainObject(params,"params",errors)==true){CIM.utils.validation.areRequired(params,fields,errors);CIM.utils.validation.areStrings(params,fields,errors)}if(errors.length>0){CIM.events.trigger("viewer:error",errors)}return errors.length===0};parseParams=function(){_.defaults(params,{schema:CIM.utils.constants.DEFAULT_SCHEMA,language:CIM.utils.constants.DEFAULT_LANGUAGE})};parseParams();if(validateParams()===true){CIM.api.getByExternalID(params)}};CIM.viewer.renderFromName=function(params){var validateParams,parseParams;validateParams=function(){var errors=[],fields=["type","name","project","schema","language"];if(CIM.utils.validation.isPlainObject(params,"params",errors)==true){CIM.utils.validation.areRequired(params,fields,errors);CIM.utils.validation.areStrings(params,fields,errors);if(errors.length===0){CIM.utils.validation.isCIMType(params.schema,params.type,errors)}}if(errors.length>0){CIM.events.trigger("viewer:error",errors)}return errors.length===0};parseParams=function(){_.defaults(params,{schema:CIM.utils.constants.DEFAULT_SCHEMA,language:CIM.utils.constants.DEFAULT_LANGUAGE})};parseParams();if(validateParams()===true){CIM.api.getByName(params)}};CIM.viewer.renderFromID=function(params){var validateParams,parseParams;validateParams=function(){var errors=[],fields=["id","version","target","project","schema","language"];if(CIM.utils.validation.isPlainObject(params,"params",errors)==true){CIM.utils.validation.areRequired(params,fields,errors);CIM.utils.validation.areStrings(params,fields,errors)}if(errors.length>0){CIM.events.trigger("viewer:error",errors)}return errors.length===0};parseParams=function(){_.defaults(params,{schema:CIM.utils.constants.DEFAULT_SCHEMA,language:CIM.utils.constants.DEFAULT_LANGUAGE})};parseParams();if(validateParams()===true){CIM.api.getByID(params)}}}).call(this);(function(){var CIM=this.cim,uiResources;uiResources={nullField:"--",messages:{emptyDocumentSet:"No CIM metadata can be found at this time."}};CIM.events.on("viewer:exception",function(exception){var error;error={type:"Viewer",subType:"Unknown",errors:[exception.message]};CIM.events.trigger("global:error",error)});CIM.events.on("viewer:error",function(errors){var error;error={type:"Viewer",subType:"General",errors:errors};CIM.events.trigger("global:error",error)});CIM.events.on("api:documentSetLoaded",function(all){var renderable;try{renderable=all.filter(function(document){return CIM.viewer.views.DocumentView.isSupported(document)});if(renderable.length===0){CIM.events.trigger("message:information",uiResources.messages.emptyDocumentSet)}else{_.each(all,function(document){CIM.utils.denull(document,uiResources.nullField)});renderable=CIM.viewer.views.DocumentView.sortDocumentSet(renderable);CIM.events.trigger("viewer:render",renderable,all)}}catch(exception){CIM.events.trigger("viewer:exception",exception)}});CIM.events.on("viewer:render",function(renderable,all){var viewerOptions,viewer,dialog;viewerOptions={documents:{all:all,renderable:renderable,current:renderable[0]},documentSet:all};viewer=new CIM.viewer.views.DocumentViewport(viewerOptions);viewer.render();dialog=new CIM.utils.views.DialogView({onClose:function(){viewer.destroy()}});CIM.events.on("viewer:documentSelected",function(document,documentSet){dialog.setTitle(document.cimDisplayTitle)});dialog.render();dialog.append(viewer.el);CIM.events.trigger("viewer:documentSelected",renderable[0],all);dialog.open()})}).call(this);(function(){var CIM=this.cim,DocumentView;DocumentView=CIM.viewer.views.DocumentView=Backbone.View.extend({className:"cim-document-outer",render:function(){var $document,documentView,ctx,renderers=[];$document=this._initializeDOM();documentView=DocumentView.getView(this.options.documentType);ctx={view:this,viewMetadata:documentView.metadata.create(),viewOptions:documentView.options.create(),make:this.make,$make:function(tagName,attributes,content){return $jq(this.make(tagName,attributes,content))},$document:$document,document:this.options.document,documentSet:this.options.documentSet};renderers=this._getRenderers(documentView.renderers,ctx);_.each(renderers,function(renderer){renderer.task(ctx)})},_initializeDOM:function(){this.$document=$jq(this.make("div",{}));this.$document.attr("id",this.options.document.cimInfo.key);this.$document.addClass("cim-document");this.$document.addClass(this.options.documentType);this.$el.append(this.$document)},addSection:function(sectionName){var sectionID,$section;sectionID=this.options.document.cimInfo.key.replace(".","-");sectionID+="-";sectionID+=sectionName;$section=$jq(this.make("div",{}));$section.attr("id",sectionID);$section.addClass("section");$section.addClass(sectionName);this.$document.append($section);return $section},_getRenderers:function(viewRenderers,ctx){var renderers=[];_.each(DocumentView.getView("all").renderers,function(r){renderers.push(r)});_.each(viewRenderers,function(r){renderers.push(r)});renderers=_.filter(renderers,function(renderer){return renderer.uiMode==="all"||renderer.uiMode===ctx.viewOptions.mode});renderers=_.filter(renderers,function(renderer){return true});renderers=_.filter(renderers,function(renderer){if(_.has(renderer,"predicate")&&_.isFunction(renderer.predicate)){return renderer.predicate(ctx)}else{return true}});return _.sortBy(renderers,"priority")}},{views:[],getView:function(documentType){var view;view=_.find(this.views,function(view){return view.documentType===documentType});if(view===undefined){view={documentType:documentType,options:undefined,metadata:undefined,renderers:[]};this.views.push(view)}return view},isSupported:function(document){var documentView;documentView=_.find(this.views,function(view){return view.documentType===document.cimInfo.typeKey});return documentView!==undefined},setMetadata:function(metadata){var view;if(_.isObject(metadata)===false||_.has(metadata,"documentType")===false||_.isString(metadata.documentType)===false||_.has(metadata,"create")===false||_.isFunction(metadata.create)===false){cimEvents.trigger("viewer:exception",{message:"Invalid view metadata factory"});return}view=this.getView(metadata.documentType);view.metadata=metadata},setOptions:function(options){var view;if(_.isObject(options)===false||_.has(options,"documentType")===false||_.isString(options.documentType)===false||_.has(options,"renderingOrder")===false||_.isNumber(options.renderingOrder)===false||_.has(options,"defaults")===false||_.isObject(options.defaults)===false){CIM.events.trigger("viewer:exception",{message:"Invalid view options"});return}_.defaults(options,{userOptions:undefined,parseUserOptions:function(userOptions){if(_.isUndefined(userOptions)){userOptions=this.defaults}else{if($jq.isPlainObject(this.defaults)&&_.isFunction(this.applyDefaults)){this.applyDefaults(userOptions)}}return userOptions},create:function(){return options.defaults}});view=this.getView(options.documentType);view.options=options},setRenderer:function(renderer){var view;if(_.isObject(renderer)===false||_.has(renderer,"documentType")===false||_.isString(renderer.documentType)===false||_.has(renderer,"task")===false||_.isFunction(renderer.task)===false){cimEvents.trigger("viewer:exception",{message:"Invalid document view renderer"});return}_.defaults(renderer,{priority:10,uiMode:"all",uiFramework:"all"});view=this.getView(renderer.documentType);view.renderers.push(renderer)},sortDocumentSet:function(documentSet){return _.sortBy(documentSet,function(doc){return this.getView(doc.cimInfo.typeKey).options.renderingOrder},this)}})}).call(this);(function(){var CIM=this.cim,DocumentView=CIM.viewer.views.DocumentView;DocumentView.setRenderer({documentType:"all",uiMode:"all",task:function(ctx){if(_.has(ctx.viewOptions,"sections")===false){return}ctx.viewSections=[];_.each(ctx.viewOptions.sections,function(vsOpt){if(vsOpt.display===true){ctx.viewSections.push(ctx.viewMetadata[vsOpt.name])}})}});DocumentView.setRenderer({documentType:"all",uiMode:"all",task:function(ctx){_.each(ctx.viewSections,function(vs){if(_.has(vs,"filterModel")===true){vs.model=vs.filterModel(ctx.document)}else{vs.model=ctx.document}})}});DocumentView.setRenderer({documentType:"all",uiMode:"all",task:function(ctx){ctx.viewSections=_.filter(ctx.viewSections,function(vs){if(_.isUndefined(vs.model)){return false}else{if(_.isArray(vs.model)&&vs.model.length===0){return false}else{if(_.isUndefined(vs.display)===false){return vs.display(vs.model)}else{return true}}}})}});DocumentView.setRenderer({documentType:"all",uiMode:"all",task:function(ctx){_.each(ctx.viewSections,function(vs){vs.$dom=ctx.view.addSection(vs.name)})}});DocumentView.setRenderer({documentType:"all",uiMode:"all",task:function(ctx){var viewSections,fieldSet,view,viewRenderMode="inline";viewSections=_.filter(ctx.viewSections,function(vs){return _.has(vs,"getFieldSet")});_.each(viewSections,function(vs){fieldSet=vs.getFieldSet(vs.model);fieldSet=_.reduce(fieldSet,function(fs,f){fs.push({title:f[0],expression:f[1]});return fs},[]);if(_.has(vs,"getFieldSetRenderMode")){viewRenderMode=vs.getFieldSetRenderMode()}view=new CIM.utils.views.FieldSetView({fieldSet:{model:vs.model,fields:fieldSet},renderMode:viewRenderMode});view.render();vs.$dom.append(view.$el.children())})}});DocumentView.setRenderer({documentType:"all",uiMode:"all",task:function(ctx){var viewSections,view;viewSections=_.filter(ctx.viewSections,function(vs){return _.has(vs,"getNamedValueSet")});_.each(viewSections,function(vs){view=new CIM.utils.views.NamedValueSetView({model:vs.getNamedValueSet(vs.model)});view.render();vs.$dom.append(view.$el.children())})}});DocumentView.setRenderer({documentType:"all",uiMode:"all",task:function(ctx){var viewSections,view;viewSections=_.filter(ctx.viewSections,function(vs){return _.has(vs,"getNamedValueGroupSet")});_.each(viewSections,function(vs){view=new CIM.utils.views.NamedValueGroupSetView({model:vs.getNamedValueGroupSet(vs.model)});view.render();vs.$dom.append(view.$el.children())})}});DocumentView.setRenderer({documentType:"all",uiMode:"tabs",uiFramework:"jq",task:function(ctx){var tabset,tabsetView;tabset=_(ctx.viewSections).reduce(function(tabs,vs){tabs.push({title:vs.title,id:vs.$dom.attr("id")});return tabs},[]);tabsetView=new CIM.utils.views.TabsetView({$content:ctx.view.$document,$contentWrapper:ctx.view.$el,tabset:tabset});tabsetView.render()}})}).call(this);(function(){var CIM=this.CIM,ViewportHeaderView,ViewportContentView,ViewportFooterView;ViewportHeaderView=Backbone.View.extend({events:{"click .toolbar-button":"_onToolbarButtonClicked"},initialize:function(){this.myToolbar=$jq(this.make("span",{"class":"toolbar",id:"cimDocumentSetToolbar"}));this.myCaption=$jq(this.make("span",{"class":"caption"}));this.$el.append(this.myToolbar);this.$el.append(this.myCaption);CIM.events.on("viewer:documentSelected",this._onDocumentSelected,this)},destroy:function(){CIM.events.off("viewer:documentSelected",this._onDocumentSelected)},render:function(){this._renderToolbar();this._renderJqueryUI()},_renderToolbar:function(){var view=this,isFirst=true,buttonID,buttonAtts,button,buttonLabel,buttonText;_.each(this.options.documents.renderable,function(document){buttonID=document.cimInfo.key+"-button";buttonAtts={id:buttonID,"class":"toolbar-button",type:"radio",name:"cimDocumentSetToolbar"};if(isFirst===true){_.extend(buttonAtts,{checked:"checked"});isFirst=false}button=$jq(view.make("input",buttonAtts));buttonText=CIM.utils.schemas.getDocumentDisplayName(document);buttonLabel=view.make("label",{"for":buttonID},buttonText);view.myToolbar.append(button);view.myToolbar.append(buttonLabel)})},_renderJqueryUI:function(){this.$el.parent().addClass("ui-state-highlight ui-corner-all");this.$el.addClass("ui-corner-all");this.$(".caption").addClass("ui-widget-header ui-corner-all");this.$(".toolbar").buttonset().find("label").css("width","120px")},_onToolbarButtonClicked:function(e){var documentKey,document;documentKey=e.currentTarget.id.replace("-button","");document=_.find(this.options.documents.renderable,function(doc){return doc.cimInfo.key===documentKey});if(_.isUndefined(document)===false){CIM.events.trigger("viewer:documentSelected",document,this.options.documents.all)}},_onDocumentSelected:function(document){this.myCaption.text(document.cimDisplayTitle)}});ViewportContentView=Backbone.View.extend({initialize:function(){this._currentDocument=undefined;this._documentViews={};CIM.events.on("viewer:documentSelected",this._onDocumentSelected,this)},destroy:function(){CIM.events.off("viewer:documentSelected",this._onDocumentSelected)},render:function(){this._renderJqueryUI()},_renderJqueryUI:function(){this.$el.parent().addClass("ui-corner-all")},_onDocumentSelected:function(document){if(_.isUndefined(document)){return}if(_.isUndefined(this._currentDocument)===false&&this._currentDocument.cimInfo.key===document.cimInfo.key){return}if(_.has(this._documentViews,document.cimInfo.key)===false){this._createDocumentView(document)}if(_.isUndefined(this._currentDocument)===false){this._documentViews[this._currentDocument.cimInfo.key].$el.hide()}this._documentViews[document.cimInfo.key].$el.show();this._currentDocument=document},_createDocumentView:function(document){var view,viewOptions;viewOptions={document:document,documentType:document.cimInfo.typeKey,documentSet:this.options.documents.all};view=new CIM.viewer.views.DocumentView(viewOptions);this._documentViews[document.cimInfo.key]=view;view.render();this.$el.append(view.$el)}});ViewportFooterView=Backbone.View.extend({initialize:function(){var inner,me=this,el;this.myDocumentCount=$jq(this.make("span",{"class":"document-count"}));this.myDocumentCountLabel=$jq(this.make("span",{"class":"label"},"Documents : "));this.myDocumentCountText=$jq(this.make("span",{"class":"text"},this.options.documents.renderable.length));this.myDocumentSummary=$jq(this.make("span",{"class":"document-summary"}));this.myDocumentSummaryLabel=$jq(this.make("span",{"class":"label"},"Document : "));this.myDocumentSummaryText=$jq(this.make("span",{"class":"text"}));this.$el.append(this.myDocumentCount);this.myDocumentCount.append(this.myDocumentCountLabel);this.myDocumentCount.append(this.myDocumentCountText);this.$el.append(this.myDocumentSummary);this.myDocumentSummary.append(this.myDocumentSummaryLabel);this.myDocumentSummary.append(this.myDocumentSummaryText);CIM.events.on("viewer:documentSelected",this._onDocumentSelected,this)},destroy:function(){CIM.events.off("viewer:documentSelected",this._onDocumentSelected)},render:function(){this._renderJqueryUI()},_renderJqueryUI:function(){this.$el.parent().addClass("ui-state-highlight ui-corner-all");this.$el.addClass("ui-corner-all")},_onDocumentSelected:function(document){this.myDocumentSummaryText.text(document.cimDisplayTitle)}});CIM.viewer.views.DocumentViewport=Backbone.View.extend({className:"cim-viewer",initialize:function(){this._subviews=[];if(this.options.documents.renderable.length>1){this._subviews.push(new ViewportHeaderView({el:this.makePanel("header"),documents:this.options.documents}))}this._subviews.push(new ViewportContentView({el:this.makePanel("content"),documents:this.options.documents}));this._subviews.push(new ViewportFooterView({el:this.makePanel("footer"),documents:this.options.documents}))},destroy:function(){_.each(this._subviews,function(subview){subview.destroy()});CIM.events.off("viewer:documentSelected",this.onDocumentSelected)},render:function(){_.each(this._subviews,function(subview){subview.render()})},$make:function(tag,p1,p2){var atts={},text;if(_.isObject(p1)===true){_.extend(atts,p1);text=p2}else{if(_.isString(p1)===true){_.extend(atts,{"class":p1})}if(_.isString(p2)===true){_.extend(atts,{id:p2})}}return $jq(this.make(tag,atts,text))},makePanel:function(panelClass){var outer,panel;outer=this.$make("div",panelClass+"-outer");panel=this.$make("div",panelClass);this.$el.append(outer);outer.append(panel);return panel}})}).call(this);(function(){var CIM=this.cim,DocumentView=CIM.viewer.views.DocumentView,DOC_TYPE="1.5-activity-numericalExperiment",applyDefaults;applyDefaults=function(userOpts,defaultOpts){_.defaults(userOpts,defaultOpts);_.defaults(userOpts.general,defaultOpts.general);_.defaults(userOpts.general.dialog,defaultOpts.general.dialog);_.defaults(userOpts.sections,defaultOpts.sections);_.defaults(userOpts.sections.overview,defaultOpts.sections.overview);_.defaults(userOpts.sections.cimInfo,defaultOpts.sections.cimInfo)};DocumentView.setMetadata({documentType:DOC_TYPE,create:function(){return{overview:{name:"overview",title:"Overview",titleLong:"Overview",getFieldSet:function(model){return[["Project","cimInfo.project"],["Short Name","shortName"],["Long Name","longName"],["Description","description"],["Rationale","rationales"]]},filterModel:function(experiment){return experiment}},requirements:{name:"requirements",title:"Requirements",titleLong:"Requirements",getFieldSet:function(model){return[["ID","id"],["Name","name"],["Description","description"],]},filterModel:function(experiment){return experiment.requirements}},cimInfo:{name:"cimInfo",title:"CIM Info",titleLong:"CIM Information",getFieldSet:function(model){return[["Project","project"],["Source","source"],["ID","id"],["Version","version"],["Creation Date","createDate"],["Schema","typeInfo.schema"],["Package","typeInfo.package"],["Type","typeInfo.type"],]},filterModel:function(experiment){return experiment.cimInfo}}}}});DocumentView.setOptions({documentType:DOC_TYPE,renderingOrder:2,defaults:{mode:"tabs",sections:[{name:"overview",display:true,mode:"inline"},{name:"requirements",display:true,mode:"inline"},{name:"cimInfo",display:true,mode:"inline"}]}})}).call(this);(function(){var CIM=this.cim,DocumentView=CIM.viewer.views.DocumentView,DOC_TYPE="1.5-activity-simulationRun";DocumentView.setMetadata({documentType:DOC_TYPE,create:function(){return{overview:{name:"overview",title:"Overview",titleLong:"Overview",getFieldSet:function(model){return[["Project","cimInfo.project"],["Short Name","shortName"],["Long Name","longName"],["Release Date","releaseDate"],["Description","description"]]},filterModel:function(model){return model}},parties:{name:"parties",title:"Parties",titleLong:"Responsible Parties",getFieldSet:function(model){return[["Role","role"],["Person","individual_name"],["Organisation","organisation_name"],["Address","contact_info.address"],["Email","contact_info.email"],["URL","contact_info.url"],]},filterModel:function(model){return model.responsibleParties}},citations:{name:"citations",title:"Citations",titleLong:"Citations",getFieldSet:function(model){return[["Title","title"],["Type","type"],["Location","location"],["Collective Title","collectiveTitle"],]},filterModel:function(model){return model.citations}},components:{name:"components",title:"Components",titleLong:"Components (top-level)",getFieldSet:function(model){return[["Short Name","shortName"],["Description","description"]]},filterModel:function(model){return model.childComponents}},cimInfo:{name:"cimInfo",title:"CIM Info",titleLong:"CIM Information",getFieldSet:function(model){return[["Project","project"],["Source","source"],["ID","id"],["Version","version"],["Creation Date","createDate"],["Schema","typeInfo.schema"],["Package","typeInfo.package"],["Type","typeInfo.type"],]},filterModel:function(model){return model.cimInfo}}}}});DocumentView.setOptions({documentType:DOC_TYPE,renderingOrder:1,defaults:{mode:"tabs",sections:[{name:"parties",display:true,mode:"inline"},{name:"cimInfo",display:true,mode:"inline"}]}})}).call(this);(function(){var CIM=this.cim,DocumentView=CIM.viewer.views.DocumentView,DOC_TYPE="1.5-activity-platform";DocumentView.setMetadata({documentType:DOC_TYPE,create:function(){return{overview:{name:"overview",title:"Overview",titleLong:"Overview",getFieldSet:function(model){return[["Project","cimInfo.project"],["Short Name","shortName"],["Long Name","longName"],["Release Date","releaseDate"],["Description","description"]]},filterModel:function(model){return model}},parties:{name:"parties",title:"Parties",titleLong:"Responsible Parties",getFieldSet:function(model){return[["Role","role"],["Person","individual_name"],["Organisation","organisation_name"],["Address","contact_info.address"],["Email","contact_info.email"],["URL","contact_info.url"],]},filterModel:function(model){return model.responsibleParties}},citations:{name:"citations",title:"Citations",titleLong:"Citations",getFieldSet:function(model){return[["Title","title"],["Type","type"],["Location","location"],["Collective Title","collectiveTitle"],]},filterModel:function(model){return model.citations}},components:{name:"components",title:"Components",titleLong:"Components (top-level)",getFieldSet:function(model){return[["Short Name","shortName"],["Description","description"]]},filterModel:function(model){return model.childComponents}},cimInfo:{name:"cimInfo",title:"CIM Info",titleLong:"CIM Information",getFieldSet:function(model){return[["Project","project"],["Source","source"],["ID","id"],["Version","version"],["Creation Date","createDate"],["Schema","typeInfo.schema"],["Package","typeInfo.package"],["Type","typeInfo.type"],]},filterModel:function(model){return model.cimInfo}}}}});DocumentView.setOptions({documentType:DOC_TYPE,renderingOrder:100,defaults:{mode:"tabs",sections:[{name:"cimInfo",display:true,mode:"inline"}]}})}).call(this);(function(){var CIM=this.cim,DocumentView=CIM.viewer.views.DocumentView,DOC_TYPE="1.5-grids-gridSpec";DocumentView.setMetadata({documentType:DOC_TYPE,create:function(){return{overview:{name:"overview",title:"Overview",titleLong:"Overview",getFieldSet:function(model){return[["Project","cimInfo.project"],["Short Name","shortName"],["Long Name","longName"],["Release Date","releaseDate"],["Description","description"]]},filterModel:function(model){return model}},parties:{name:"parties",title:"Parties",titleLong:"Responsible Parties",getFieldSet:function(model){return[["Role","role"],["Person","individual_name"],["Organisation","organisation_name"],["Address","contact_info.address"],["Email","contact_info.email"],["URL","contact_info.url"],]},filterModel:function(model){return model.responsibleParties}},citations:{name:"citations",title:"Citations",titleLong:"Citations",getFieldSet:function(model){return[["Title","title"],["Type","type"],["Location","location"],["Collective Title","collectiveTitle"],]},filterModel:function(model){return model.citations}},components:{name:"components",title:"Components",titleLong:"Components (top-level)",getFieldSet:function(model){return[["Short Name","shortName"],["Description","description"]]},filterModel:function(model){return model.childComponents}},cimInfo:{name:"cimInfo",title:"CIM Info",titleLong:"CIM Information",getFieldSet:function(model){return[["Project","project"],["Source","source"],["ID","id"],["Version","version"],["Creation Date","createDate"],["Schema","typeInfo.schema"],["Package","typeInfo.package"],["Type","typeInfo.type"],]},filterModel:function(model){return model.cimInfo}}}}});DocumentView.setOptions({documentType:DOC_TYPE,renderingOrder:10,defaults:{mode:"tabs",sections:[{name:"cimInfo",display:true,mode:"inline"}]}})}).call(this);(function(){var CIM=this.cim,DocumentView=CIM.viewer.views.DocumentView,DOC_TYPE="1.5-software-modelComponent";DocumentView.setMetadata({documentType:DOC_TYPE,create:function(){return{overview:{name:"overview",title:"Overview",titleLong:"Overview",getFieldSet:function(model){return[["Project","cimInfo.project"],["Short Name","shortName"],["Long Name","longName"],["Language","componentLanguage.name"],["Release Date","releaseDate"],["Description","description"]]}},parties:{name:"parties",title:"Parties",titleLong:"Responsible Parties",getFieldSet:function(model){var result=[["Role","role"],["Person","individualName"],["Organisation","organisationName"],];if(_.has(model,"contactInfo")){result.push(["Address","contactInfo.address"]);result.push(["Email","contactInfo.email"]);result.push(["URL","contactInfo.url"])}return result},filterModel:function(model){return model.responsibleParties}},citations:{name:"citations",title:"Citations",titleLong:"Citations",getFieldSet:function(model){return[["Title","title"],["Type","type"],["Location","location"],["Collective Title","collectiveTitle"],]},filterModel:function(model){return model.citations}},components:{name:"components",title:"Components",titleLong:"Components (top-level)",getFieldSet:function(model){return[["Short Name","shortName"],["Description","description"]]},filterModel:function(model){return model.childComponents}},scientificProperties:{name:"scientificProperties",title:"Scientific Props.",titleLong:"Properties",getNamedValueGroupSet:function(sprops){var result=[],general,other=[],group;general={title:"General",namedValueSet:[]};result.push(general);_.each(sprops,function(sprop){if(sprop.componentProperties.length==0){general.namedValueSet.push({name:sprop.longName,value:sprop.value})}else{group={title:sprop.longName,namedValueSet:[]};_.each(sprop.componentProperties,function(sp){group.namedValueSet.push({name:sp.shortName,value:sp.value})});other.push(group)}});result=result.concat(_.sortBy(other,"title"));return result},filterModel:function(model){return model.scientificProperties}},cimInfo:{name:"cimInfo",title:"CIM Info",titleLong:"CIM Information",getFieldSet:function(model){return[["Project","project"],["Source","source"],["ID","id"],["Version","version"],["Creation Date","createDate"],["Schema","typeInfo.schema"],["Package","typeInfo.package"],["Type","typeInfo.type"],]},filterModel:function(model){return model.cimInfo}}}}});DocumentView.setOptions({documentType:DOC_TYPE,renderingOrder:1,defaults:{mode:"tabs",sections:[{name:"overview",display:true,mode:"inline"},{name:"parties",display:true,mode:"inline"},{name:"citations",display:true,mode:"inline"},{name:"components",display:true,mode:"topInline"},{name:"scientificProperties",display:true,mode:"topInline"},{name:"cimInfo",display:true,mode:"inline"}]}});DocumentView.setRenderer({documentType:DOC_TYPE,uiMode:"all",uiFramework:"all",predicate:function(ctx){return true},task:function(ctx){}})}).call(this);